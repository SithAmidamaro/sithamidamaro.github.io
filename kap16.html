<!DOCTYPE html>
<html lang="cs"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Kapitola 11 – Skryté runy</title>
<link rel="stylesheet" href="css/style.css">
<script defer src="js/helpers.js"></script>
</head><body>
<div class="container">
  <div class="nav"><a class="btn" href="kap15b.html">← Zpět</a></div>
  <h1>Kapitola 11 – Skryté runy</h1>
  <div class="panel"><div class="dialogue">
  <img src="img/alchemista_svitek_ukol.png" alt="Alchymista" class="avatar">
  <div class="bubble"><p><strong>Alchymista:</strong> „Možná dokážu pomoci i já – skrze sílu run. Ale musíme najít ty správné... kdysi jsem schoval sadu magických run. Zkusím ti promítnout místo, ale sám si nejsem jistý, kde to je...“</p></div>
</div>
<div class="choices">
  <button onclick="out('Truhličku a v ní bude sáček!')">„Co přesně mám na místě hledat?“</button>
  <button onclick="out('Pamatuji si strom... <strong>ANO, hledej strom ve tvaru FEHU!  A pak běž tam, kam ukazají větve stromu/runy, nahoru... k chatě poblíž. Zakopal jsem to do země u skály a malého stromu. Místo jsem označil runou -FEHU-</strong>  ')">„Jak poznám správné místo?“</button>
  <button onclick="out('Zde, tohle se vybavuji')">„Promítnout místo“</button>
<div id="projection-images" style="display:none; margin-top:10px;">
  <div class="img-row">
    <img src="img/fehu_fix_1.gif" alt="Fehu projekce 1">
    <img src="img/fehu_fix_2.gif" alt="Fehu projekce 2">
  </div>
</div>
</div>
</style>
<style>
.img-row {
  display: flex;
  gap: 10px;
  justify-content: center;
  align-items: flex-start;
  flex-wrap: wrap;
}
.img-row img {
  max-width: 45vw;
  height: auto;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
@media (max-width: 600px) {
  .img-row {
    flex-direction: column;
    align-items: center;
  }
  .img-row img {
    max-width: 90vw;
    margin-bottom: 10px;
  }
}
</style>
<div id="out16"></div>
<div id="task-bubble" class="bubble" style="margin-top:10px; display:none;">
  <p><strong>Úkol:</strong> Našla si to místo?</p>
  <div class="input-row">
    <input id="mapa" type="text" placeholder="Povedlo se?">
    <button onclick="ok16()">Potvrdit</button>
  </div>
  <p id="hint16" class="feedback"></p>
  <div id="cont16"></div>
</div>
<script>
// Avatar efekt: změna obrázku na mávajícího alchymistu na 1 sekundu + přehrání zvuku hi.mp3
document.addEventListener('DOMContentLoaded', function() {
  var avatar = document.querySelector('.avatar');
  if(avatar) {
    var origSrc = avatar.getAttribute('src');
    var avatarAudio = document.getElementById('avatar-audio');
    if(!avatarAudio) {
      avatarAudio = document.createElement('audio');
      avatarAudio.id = 'avatar-audio';
      avatarAudio.src = 'audio/hi.mp3';
      avatarAudio.style.display = 'none';
      document.body.appendChild(avatarAudio);
    }
    avatar.addEventListener('click', function() {
      avatar.src = 'img/alchymista_mavajici.png';
      try { avatarAudio.currentTime = 0; avatarAudio.play(); } catch(e) {}
      setTimeout(function() {
        avatar.src = origSrc;
      }, 1000);
    });
  }
});
function out(t){
  const btns = document.querySelectorAll('.choices button');
  btns.forEach((b,i)=>{
    if(b.textContent.includes(t.split(':')[0].replace(/\s*\(.*/,''))) b.classList.add('selected');
    else b.classList.remove('selected');
  });
  document.getElementById('out16').innerHTML = `<div class='bubble'><p><strong>Alchymista:</strong> „${t}“</p></div>`;
  const taskBubble = document.getElementById('task-bubble');
  const projImages = document.getElementById('projection-images');
  if(t.startsWith('Dobře. Jemu možná bude něco povědomé.')){
    taskBubble.style.display = 'block';
    projImages.style.display = 'none';
  } else if (t.includes('Zde, tohle se vybavuji')) {
    projImages.style.display = 'block';
    taskBubble.style.display = 'block'; // Zajistí, že úkol a input zůstanou viditelné
  } else {
    taskBubble.style.display = 'none';
    projImages.style.display = 'none';
  }
}
function ok16(){
  const v=(document.getElementById('mapa').value||'').trim();
  if(!v){document.getElementById('hint16').textContent='„Neví?“'; document.getElementById('cont16').innerHTML=''; return;}
  document.getElementById('hint16').textContent=''; document.getElementById('cont16').innerHTML = `<a class='continue-btn' href='kap17.html'>👉 Pokračovat</a>`;
}
</script>
</div>
</div>
</body></html>