<!DOCTYPE html>
<html lang="cs"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Kapitola 18 â€“ VÄ›Å¡tba z run (4/4)</title>
<link rel="stylesheet" href="css/style.css">
<script defer src="js/helpers.js"></script>
<script defer src="js/runes.js"></script>
</head><body>
<div class="container">
  <div class="nav"><button class="btn" onclick="restartRunes()">â†º VÄ›Å¡tit znovu</button></div>
  <h1>Kapitola 18 â€“ VÄ›Å¡tba z run (4/4)</h1>
  <div class="panel"><div class="dialogue">
  <img src="img/alchemista_svitek_ukol.png" alt="Alchymista" class="avatar">
  <div class="bubble"><p><strong>Alchymista:</strong> â€DobÅ™e. MÃ¡m <strong>TÅ˜I RUNY</strong>. TeÄ je spojÃ­m â€“ aÅ¥ promluvÃ­.â€œ</p></div>
</div>
<div class="bubble">
  <p id="qline" class="small"></p>
  <p><strong>VybranÃ© runy:</strong> <span id="runesRow"></span></p><hr>
  <p id="v1"></p><p id="v2"></p><p id="v3"></p>
</div>
<div id="cont"></div>
<script>
// Avatar efekt: zmÄ›na obrÃ¡zku na mÃ¡vajÃ­cÃ­ho alchymistu na 1 sekundu
document.addEventListener('DOMContentLoaded', function() {
  var avatar = document.querySelector('.avatar');
  if(avatar) {
    var origSrc = avatar.getAttribute('src');
    avatar.addEventListener('click', function() {
      avatar.src = 'img/alchymista_mavajici.png';
      setTimeout(function() {
        avatar.src = origSrc;
      }, 1000);
    });
  }
});
const QMAP = {
  'default': '',
  'today':  'OtÃ¡zka: Co dnes potÅ™ebuji vÄ›dÄ›t?',
  'fight':  'OtÃ¡zka: Jak dopadne boj?',
  'future': 'OtÃ¡zka: Co pÅ™inese budoucnost?'
};
function setRunesRow(r1, r2, r3){
  document.getElementById('runesRow').textContent = r1+' â€¢ '+r2+' â€¢ '+r3;
}
function restartRunes(){
  try{
    localStorage.removeItem('r1');
    localStorage.removeItem('r2');
    localStorage.removeItem('r3');
  }catch(e){}
  window.location.href = 'kap18.html';
}
async function load(){
  const r1 = localStorage.getItem('r1')||'â€”';
  const r2 = localStorage.getItem('r2')||'â€”';
  const r3 = localStorage.getItem('r3')||'â€”';
  const qt = (localStorage.getItem('rq')||'default');
  const qline = QMAP[qt]||'';
  document.getElementById('qline').textContent = qline;
  setRunesRow(r1, r2, r3);
  try{
    await Runes.loadRunes();
    const { lines } = Runes.generateForecast(r1, r2, r3);
    document.getElementById('v1').textContent = lines.start;
    document.getElementById('v2').textContent = lines.obstacle;
    document.getElementById('v3').textContent = lines.result;
  }catch(e){
    const MAP = {"Algiz": ["Cesta zaÄÃ­nÃ¡ pod Å¡tÃ­tem ochrany.", "Ale i Å¡tÃ­t mÅ¯Å¾e prasknout.", "Nakonec budeÅ¡ chrÃ¡nÄ›na, kdyÅ¾ zÅ¯staneÅ¡ vÄ›rnÃ¡ svÃ½m instinktÅ¯m."], "Ansuz": ["Slovo otevÅ™e prvnÃ­ dveÅ™e.", "Slova mohou i klamat.", "Nakonec pravda promluvÃ­ jasnÄ›."], "Berkana": ["Z temnoty se rodÃ­ novÃ½ zaÄÃ¡tek.", "Ale zrozenÃ­ je bolestnÃ© a nejistÃ©.", "Nakonec vykvete, co bylo zaseto."], "Dagaz": ["Den se lÃ¡me, nastÃ¡vÃ¡ zmÄ›na.", "Ale zmÄ›na pÅ™inÃ¡Å¡Ã­ chaos.", "Nakonec vyjde svÄ›tlo nad obzorem."], "Fehu": ["Na zaÄÃ¡tku stojÃ­ zisk a hojnost.", "Majetek mÅ¯Å¾e svÃ¡zat i oslepit.", "Nakonec zÅ¯stane to, co mÃ¡ hodnotu v srdci."]};
    function line(r, i){ if(MAP[r]) return MAP[r][i]; const g=[["ZaÄÃ¡tek Å¡eptÃ¡ o kroku vpÅ™ed.","PrvnÃ­ krok bÃ½vÃ¡ nejistÃ½.","Nakonec cesta vÃ­, kam vede."]]; return g[0][i]; }
    document.getElementById('v1').textContent = line(r1,0);
    document.getElementById('v2').textContent = line(r2,1);
    document.getElementById('v3').textContent = line(r3,2);
  }
  document.getElementById('cont').innerHTML = `<a class='continue-btn' href='kap19.html'>ğŸ‘‰ PokraÄovat (Kapitola 19)</a>`;
}
window.addEventListener('DOMContentLoaded', load);
</script>
</div>
</div>
</body></html>
