<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kapitola 7 â€“ PÅ™enosnÃ¡ laboratoÅ™</title>
  <link rel="stylesheet" href="css/style.css">
  <script defer src="js/helpers.js"></script>
</head>
<body>
  <div class="container">
  <div class="nav"><a class="btn" href="kap5.html">â† ZpÄ›t</a></div>
    <h1>Kapitola 7 â€“ PÅ™enosnÃ¡ laboratoÅ™</h1>
    <div class="panel">
      <div class="dialogue">
        <img src="img/alchemista_vysvetlujici_smejici_2.png" alt="Alchymista" class="avatar">
        <div class="bubble">
          <p><strong>Alchymista:</strong> "VzpomÃ­nÃ¡m siâ€¦ mÃ­val jsem pÅ™enosnou laboratoÅ™ â€“ malou krabiÄku na lektvary, abych mohl mÃ­chat elixÃ­ry a dÄ›lat experimenty i v divoÄinÄ›. Nechal jsem jiâ€¦ v tÃ©hle chatÄ›! Zkus jÃ­ najÃ­t, urÄitÄ› tam nÄ›kde bude."</p>
        </div>
      </div>

      <div class="choices">
        <button onclick="say(1)">â€Kde by mÄ›la bÃ½t?â€œ</button>
        <button onclick="say(2)">â€K Äemu slouÅ¾ila?â€œ</button>
      </div>
      <div id="out" style="margin-top:10px;"></div>

      <div class="bubble" style="margin-top:10px;">
        <p><strong>Alchymista:</strong> â€AÅ¾ ji najdeÅ¡, dej mi vÄ›dÄ›t.â€œ</p>
        <div class="choices">
          <button onclick="found()">NaÅ¡la jsem ji.</button>
        </div>
        <div id="cont"></div>
      </div>

  <!-- Footer navigation removed -->
    </div>
  </div>

<script>
// Avatar efekt: zmÄ›na obrÃ¡zku na vydÄ›Å¡enÃ©ho na 1 sekundu (bez rozsvÃ­cenÃ­)
document.addEventListener('DOMContentLoaded', function() {
  var avatar = document.querySelector('.avatar');
  if(avatar) {
    var origSrc = avatar.getAttribute('src');
    avatar.addEventListener('click', function() {
      avatar.src = 'img/alchemista_vydeseny.png';
      setTimeout(function() {
        avatar.src = origSrc;
      }, 1000);
    });
  }
});
function say(n){
  const btns = document.querySelectorAll('.choices button');
  btns.forEach((b,i)=>{
    if(i===n-1) b.classList.add('selected');
    else b.classList.remove('selected');
  });
  const o=document.getElementById('out');
  if(n===1){
    o.innerHTML = `<div class="bubble" style="margin-top:8px;"><p><strong>Alchymista:</strong> "NevÃ­m jistÄ›... VzpomÃ­nÃ¡m si na Å¡uplÃ­kâ€¦ a jak pÃ­Å¡u vzkaz: <strong><em>NEÅ AHAT LAMBERTE</em></strong>."</p></div>`;
  }else{
    o.innerHTML = `<div class="bubble" style="margin-top:8px;"><p><strong>Alchymista:</strong> "Byla to moje hrdost. ZaklÃ­naÄi mÄ›li jen meÄe a znamenÃ­. JÃ¡ jim chtÄ›l dÃ¡t vÃ­c â€“ moÅ¾nost tvoÅ™it kdekoli. ElixÃ­ry, mutagenyâ€¦ snad i nÄ›co, co prolomÃ­ kletby."</p></div>`;
  }
}
function found(){
  const cont = document.getElementById('cont');
  const btns = document.querySelectorAll('.choices button');
  btns.forEach((b) => {
    if (b.textContent.includes('NaÅ¡la jsem ji')) b.classList.add('selected');
    else b.classList.remove('selected');
  });
  cont.innerHTML = `<div class="bubble" style="margin-top:8px;"><p><strong>Alchymista:</strong> "VÃ½bornÄ›! TeÄ mÃ¡Å¡ v rukou mou pÅ™enosnou laboratoÅ™ â€“ spoleÄnÄ› zvlÃ¡dneme velkÃ© vÄ›ci. NajdeÅ¡ tam rÅ¯znÃ© mÃ© experimenty; klidnÄ› nÄ›kterÃ© vyzkouÅ¡ej, urÄitÄ› se budou hodit. JÃ¡ mezitÃ­m zjistÃ­m, co se dÃ¡â€¦ poptÃ¡m se mezi stÃ­ny lesa. <strong> Ozvi se mi, aÅ¾ budeÅ¡ hotova s experimenty a aÅ¾ tma pohltÃ­ lesy. </strong>"</p></div>
    <div class='input-row' style='margin-top:8px;'>
      <input id='tma' type='text' placeholder='UÅ¾ je tma?'>
      <button onclick='confirmTma()'>Potvrdit</button>
    </div>
    <p id='hint' class='feedback'></p>
    <div id='next'></div>`;
}

function confirmTma(){
  const v = document.getElementById('tma').value.trim();
  const hint = document.getElementById('hint');
  const next = document.getElementById('next');
  if(!v){
    hint.textContent = 'â€MusÃ­Å¡ nÄ›co napsat, aby ses mohla posunout dÃ¡l.â€œ';
    next.innerHTML = '';
  }else{
    hint.textContent = '';
    next.innerHTML = `<a class='continue-btn' href='kap7c.html'>ğŸ‘‰ PokraÄovat (Kapitola 7c â€“ Lektvar KoÄky)</a>`;
  }
}
</script>
</body>
</html>
