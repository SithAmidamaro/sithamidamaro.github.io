<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kapitola 1a â€“ Opravu si ZaklÃ­naÄka?</title>
  <link rel="stylesheet" href="css/style.css">
  <script defer src="js/helpers.js"></script>
</head>
<body>
  <div class="container">
    <div class="nav">
      <a class="btn" href="kap3.html">â† ZpÄ›t</a>
    </div>
    <h1>Kapitola 1a â€“ Opravu si ZaklÃ­naÄka?</h1>
    <div class="panel">
      <div class="dialogue">
        <img src="img/alchemista_nechapavy.png" alt="Alchymista" class="avatar">
        <div class="bubble">
          <p><strong>Alchymista:</strong> "Å˜Ã­kÃ¡Å¡, Å¾e jsi ze Å koly Vlkaâ€¦ Ale svÄ›t je plnÃ½ klamÅ¯. MusÃ­Å¡ mi dokÃ¡zat, Å¾e krev ZaklÃ­naÄe proudÃ­ v tvÃ½ch Å¾ilÃ¡ch. OdpovÄ›z na mÃ© otÃ¡zkyâ€¦ nÄ›co se mi vybavuje... a jÃ¡ poznÃ¡m pravdu."</p>
        </div>
      </div>

      <!-- Q1 -->
      <div id="q1" class="question">
        <p><strong>1. Kdo aktuÃ¡lnÄ› vede Å¡kolu Vlka?</strong></p>
        <div class="choices">
          <button onclick="q1('Geralt')">Geralt</button>
          <button onclick="q1('Lambert')">Lambert</button>
          <button onclick="q1('Vesemir')">Vesemir</button>
        </div>
        <p id="f1" class="feedback"></p>
      </div>

      <!-- Q2 -->
      <div id="q2" class="question" style="display:none;">
        <p><strong>2. Jak se jmenuje hrad, kde sÃ­dlÃ­ Å¡kola Vlka?</strong></p>
        <div class="choices">
          <button onclick="q2('Novigrad')">Novigrad</button>
          <button onclick="q2('Kaer Morhen')">Kaer Morhen</button>
          <button onclick="q2('Oxenfurt')">Oxenfurt</button>
        </div>
        <p id="f2" class="feedback"></p>
      </div>

      <!-- Q3 -->
      <div id="q3" class="question" style="display:none;">
        <p><strong>3. JakÃ½ lektvar zvyÅ¡uje noÄnÃ­ vidÄ›nÃ­?</strong></p>
        <div class="choices">
          <button onclick="q3('Osel')">Osel</button>
          <button onclick="q3('PaviÃ¡n')">PaviÃ¡n</button>
          <button onclick="q3('KoÄka')">KoÄka</button>
        </div>
        <p id="f3" class="feedback"></p>
      </div>

      <!-- Q4 -->
      <div id="q4" class="question" style="display:none;">
        <p><strong>4. ÄŒÃ­m prochÃ¡zÃ­ ÄlovÄ›k, aby se stal zaklÃ­naÄem?</strong></p>
        <div class="choices">
          <button onclick="q4('pravdy')">ZkouÅ¡ka pravdy</button>
          <button onclick="q4('trav')">ZkouÅ¡ka trav</button>
          <button onclick="q4('odhodlani')">ZkouÅ¡ka odhodlÃ¡nÃ­</button>
        </div>
        <p id="f4" class="feedback"></p>
      </div>

      <!-- Q5 -->
      <div id="q5" class="question" style="display:none;">
        <p><strong>5. Co je to â€Znak Quenâ€œ a k Äemu slouÅ¾Ã­?</strong></p>
        <div class="choices">
          <button onclick="q5('stit')">OchrannÃ½ Å¡tÃ­t</button>
          <button onclick="q5('ohnivy')">OhnivÃ½ Ãºtok</button>
          <button onclick="q5('axii')">Manipulace mysli</button>
        </div>
        <p id="f5" class="feedback"></p>
      </div>

      <!-- Q6 -->
      <div id="q6" class="question" style="display:none;">
        <p><strong>6. Co lovÃ­ zaklÃ­naÄ?</strong></p>
        <div class="choices">
          <button onclick="q6('poklady')">Poklady</button>
          <button onclick="q6('carodejky')">ÄŒarodÄ›jky</button>
          <button onclick="q6('nestvury')">NestvÅ¯ry</button>
        </div>
        <p id="f6" class="feedback"></p>
      </div>

      <!-- Q7 (vÅ¡e sprÃ¡vnÃ©) -->
      <div id="q7" class="question" style="display:none;">
        <p><strong>7. Co by si nikdy neÅ™ekla v hospodÄ›?</strong></p>
        <div class="choices">
          <button onclick="q7('mleko')">â€DÃ¡m si mlÃ©ko, prosÃ­m.â€œ</button>
          <button onclick="q7('nezajmu')">â€NestvÅ¯ry? Ty mÄ› nezajÃ­majÃ­.â€œ</button>
          <button onclick="q7('elixirlasky')">â€ZnÃ¡te recept na elixÃ­r lÃ¡sky?â€œ</button>
        </div>
        <p id="f7" class="feedback"></p>
      </div>

      <!-- Q8 (vÅ¡e sprÃ¡vnÃ©) -->
      <div id="q8" class="question" style="display:none;">
        <p><strong>8. TvÅ¯j nejoblÃ­benÄ›jÅ¡Ã­ nÃ¡poj po tÄ›Å¾kÃ©m boji? </strong></p>
        <div class="choices">
          <button onclick="q8('medovina')">VÃ­no</button>
          <button onclick="q8('vlastovka')">VlaÅ¡tovka (elixÃ­r)</button>
          <button onclick="q8('cokoliv')">Cokoliv, co mÄ› neotrÃ¡vÃ­</button>
        </div>
        <p id="f8" class="feedback"></p>
      </div>

      <!-- Q9 (vÅ¡e sprÃ¡vnÃ©) -->
      <div id="q9" class="question" style="display:none;">
        <p><strong>9. ZaklÃ­naÄskÃ½ zpÅ¯sob Å™eÅ¡enÃ­ hÃ¡dky? </strong></p>
        <div class="choices">
          <button onclick="q9('mece')">Souboj na meÄe</button>
          <button onclick="q9('pravdy')">ElixÃ­r pravdy</button>
          <button onclick="q9('mlceni')">MlÄenÃ­ a zamraÄenÃ½ pohled</button>
        </div>
        <p id="f9" class="feedback"></p>
      </div>

      <div id="finish" style="display:none; margin-top:12px;">
        <div class="bubble">
          <p><strong>Alchymista:</strong> "Anoâ€¦ vidÃ­m, Å¾e jsi pravÃ¡ zaklÃ­naÄka! â€“ a jeÅ¡tÄ› k tomu pÅ¯vabnÃ¡! Jakpak ti Å™Ã­kajÃ­, smÃ­m-li se ptÃ¡t?"</p>
        </div>
        <div class="input-row">
          <input type="text" id="playerName" placeholder="TvÃ© jmÃ©no">
          <button onclick="submitName()">OK</button>
        </div>
        <div id="nameResp"></div>
      </div>

  <!-- Footer navigation removed -->
    </div>
  </div>

<script>
// Avatar efekt: zmÄ›na obrÃ¡zku na vydÄ›Å¡enÃ©ho na 1 sekundu + pÅ™ehrÃ¡nÃ­ zvuku
document.addEventListener('DOMContentLoaded', function() {
  var avatar = document.querySelector('.avatar');
  if(avatar) {
    var origSrc = avatar.getAttribute('src');
    var avatarAudio = document.getElementById('avatar-audio');
    if(!avatarAudio) {
      avatarAudio = document.createElement('audio');
      avatarAudio.id = 'avatar-audio';
      avatarAudio.src = 'audio/huh.ogg';
      avatarAudio.style.display = 'none';
      document.body.appendChild(avatarAudio);
    }
    avatar.addEventListener('click', function() {
      avatar.src = 'img/alchemista_vydeseny.png';
      try { avatarAudio.currentTime = 0; avatarAudio.play(); } catch(e) {}
      setTimeout(function() {
        avatar.src = origSrc;
      }, 1000);
    });
  }
});
let score=0;
function q1(a){
  const btns = document.querySelectorAll('#q1 .choices button');
  btns.forEach((b)=>{
    if(b.textContent === a) b.classList.add('selected');
    else b.classList.remove('selected');
  });
  const f=document.getElementById('f1');
  if(a==='Vesemir'){ score++; f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€Anoâ€¦ Vesemir. StarÃ½, moudrÃ½. ZajÃ­malo by mÄ› jak se mÃ¡...â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; show('q2'); }
  else if(a==='Geralt'){ f.innerHTML='âŒ <em>â€Geraltâ€¦ vlk to je, ale nikdy nebyl mistrem. On krÃ¡ÄÃ­ vlastnÃ­ cestou.â€œ</em>'; }
  else { f.innerHTML='âŒ <em>â€Lambertâ€¦ ha! Ten by sotva zvlÃ¡dl vÃ©st i stÃ¡do koz, natoÅ¾ zaklÃ­naÄskou Å¡kolu!â€œ</em>'; }
}
function q2(a){
  const btns = document.querySelectorAll('#q2 .choices button');
  btns.forEach((b)=>{
    if(b.textContent === a) b.classList.add('selected');
    else b.classList.remove('selected');
  });
  const f=document.getElementById('f2');
  if(a==='Kaer Morhen'){ score++; f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€Kaer Morhenâ€¦ ano, starÃ¡ pevnost v horÃ¡ch.â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; show('q3'); }
  else if(a==='Novigrad'){ f.innerHTML='âŒ <em>â€Novigrad? MÄ›sto kupcÅ¯, nÃ© zaklÃ­naÄÅ¯.â€œ</em>'; }
  else { f.innerHTML='âŒ <em>â€Oxenfurt? Tam uÄÃ­ knihomolovÃ©, ne zaklÃ­naÄi.â€œ</em>'; }
}
function q3(a){
  const btns = document.querySelectorAll('#q3 .choices button');
  btns.forEach((b)=>{
    if(b.textContent === a) b.classList.add('selected');
    else b.classList.remove('selected');
  });
  const f=document.getElementById('f3');
  if(a==='KoÄka'){ score++; f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€Anoâ€¦ KoÄka. OÄi ve tmÄ› jako v prÃ¡vem poledne.â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; show('q4'); }
  else if(a==='Osel'){ f.innerHTML='âŒ <em>â€Osel? â€¦TvÅ¯j humor je temnÄ›jÅ¡Ã­ neÅ¾ noc sama.â€œ</em>'; }
  else { f.innerHTML='âŒ <em>â€PaviÃ¡n? CoÅ¾e?! â€¦tohle jsem snad ani jÃ¡ nikdy nemÃ­chal.â€œ</em>'; }
}

function highlightChoice(btns, value) {
  btns.forEach((b) => {
    if (b.getAttribute('onclick')?.includes(`'${value}'`)) b.classList.add('selected');
    else b.classList.remove('selected');
  });
}

function q4(a){
  const btns = document.querySelectorAll('#q4 .choices button');
  highlightChoice(btns, a);
  const f=document.getElementById('f4');
  if(a==='trav'){ score++; f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€Ano! ZkouÅ¡ka trav. Bolest, krev a pÅ™eÅ¾itÃ­ â€“ jen ti nejsilnÄ›jÅ¡Ã­ zÅ¯stali.â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; show('q5'); }
  else if(a==='pravdy'){ f.innerHTML='âŒ <em>â€Pravdy? â€¦Pravda v tomto svÄ›tÄ› nic neznamenÃ¡.â€œ</em>'; }
  else { f.innerHTML='âŒ <em>â€VÃ¡Å¾nÄ›?â€œ</em>'; }
}
function q5(a){
  const btns = document.querySelectorAll('#q5 .choices button');
  highlightChoice(btns, a);
  const f=document.getElementById('f5');
  if(a==='stit'){ score++; f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€SprÃ¡vnÄ›! Quen chrÃ¡nÃ­ zaklÃ­naÄe pÅ™ed Ãºderem, jako Å¡tÃ­t svÄ›tla.â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; show('q6'); }
  else if(a==='ohnivy'){ f.innerHTML='âŒ <em>â€To je Igni, ne Quen.â€œ</em>'; }
  else { f.innerHTML='âŒ <em>â€To by byl Axii, ne Quen.â€œ</em>'; }
}
function q6(a){
  const btns = document.querySelectorAll('#q6 .choices button');
  highlightChoice(btns, a);
  const f=document.getElementById('f6');
  if(a==='nestvury'){ score++; f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€Ano. NestvÅ¯ry, aÅ¥ vypadajÃ­ jakkolivâ€¦â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; show('q7'); }
  else if(a==='poklady'){ f.innerHTML='âŒ <em>â€Poklady? To je prÃ¡ce zlodÄ›jÅ¯.â€œ</em>'; }
  else { f.innerHTML='âŒ <em>â€Co vÃ­m, tak ÄarodÄ›jky spÃ­Å¡ lovÃ­ zaklÃ­naÄe. Hah!â€œ</em>'; }
}
function q7(a){
  const btns = document.querySelectorAll('#q7 .choices button');
  highlightChoice(btns, a);
  const f=document.getElementById('f7');
  score++;
  if(a==='mleko'){ f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€Haha!â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; }
  if(a==='nezajmu'){ f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€Haha!â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; }
  if(a==='elixirlasky'){ f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€Haha!â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; }
  show('q8');
}
function q8(a){
  const btns = document.querySelectorAll('#q8 .choices button');
  highlightChoice(btns, a);
  const f=document.getElementById('f8');
  score++;
  if(a==='medovina'){ f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€ÄŒekal bych spÃ­Å¡ medovinu, ale kdo jsem abych soudil !â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; }
  if(a==='vlastovka'){ f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€Ano, VlaÅ¡tovka. UzdravÃ­, posÃ­lÃ­. MÅ¯j vynÃ¡lez!â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; }
  if(a==='cokoliv'){ f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€Ha! Pravda. ZaklÃ­naÄi majÃ­ Å¾aludek z oceli, ale i ten mÃ¡ hranice.â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; }
  show('q9');
}
function q9(a){
  const btns = document.querySelectorAll('#q9 .choices button');
  highlightChoice(btns, a);
  const f=document.getElementById('f9');
  score++;
  if(a==='mece'){ f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€Krev Äasto Å™eÅ¡Ã­ vÃ­c neÅ¾ slova.â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; }
  if(a==='pravdy'){ f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€ZajÃ­mavÃ©â€¦â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; }
  if(a==='mlceni'){ f.innerHTML='<span style="color:#1ca63a">âœ… <em>â€Haha. Jste vÅ¡ichni stejnÃ­.â€œ</em> (+1 dÅ¯vÄ›ra)</span>'; }
  show('finish');
}
function submitName(){
  const name = document.getElementById('playerName').value.trim() || 'ZaklÃ­naÄko';
  localStorage.setItem('playerName', name);
  document.getElementById('nameResp').innerHTML = `<div class="bubble"><p><strong>Alchymista:</strong> "${name} ... krÃ¡snÃ© jmÃ©no! RÃ¡d tÄ› poznÃ¡vÃ¡m, jÃ¡ jsemâ€¦ jÃ¡ jsemâ€¦"</p><p><strong>Alchymista:</strong> "... na svÃ© jmÃ©no si nevzpomÃ­nÃ¡m. ZvlÃ¡Å¡tnÃ­, Å¾e? Ale to teÄ nenÃ­ dÅ¯leÅ¾itÃ©."</p></div>
    <div class='bubble' style='margin-top:10px;'><p><strong>Alchymista:</strong> "A jak se jmenuje tvÅ¯j spoleÄnÃ­k na tÃ©to cestÄ›?"</p></div>
    <div class='input-row'><input type='text' id='companionName' placeholder='JmÃ©no spoleÄnÃ­ka'><button onclick='submitCompanion()'>OK</button></div>
    <div id='companionResp'></div>`;
}
function submitCompanion(){
  const name2 = document.getElementById('companionName').value.trim() || 'tvÅ¯j spoleÄnÃ­k';
  localStorage.setItem('companionName', name2);
  document.getElementById('companionResp').innerHTML = `<div class='bubble'><p><strong>Alchymista:</strong> "${name2}, hmm, dobrÃ© jmÃ©no pro zaklÃ­naÄe!"</p></div><a class='continue-btn' href='kap4.html'>ğŸ‘‰ PokraÄovat</a>`;
}
</script>
</body>
</html>
