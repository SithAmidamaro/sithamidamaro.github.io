<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kapitola 1a – Opravu si Zaklínačka?</title>
  <link rel="stylesheet" href="css/style.css">
  <script defer src="js/helpers.js"></script>
</head>
<body>
  <div class="container">
    <div class="nav">
      <a class="btn" href="kap3.html">← Zpět</a>
    </div>
    <h1>Kapitola 1a – Opravu si Zaklínačka?</h1>
    <div class="panel">
      <div class="dialogue">
        <img src="img/alchemista_nechapavy.png" alt="Alchymista" class="avatar">
        <div class="bubble">
          <p><strong>Alchymista:</strong> "Říkáš, že jsi ze Školy Vlka… Ale svět je plný klamů. Musíš mi dokázat, že krev Zaklínače proudí v tvých žilách. Odpověz na mé otázky… něco se mi vybavuje... a já poznám pravdu."</p>
        </div>
      </div>

      <!-- Q1 -->
      <div id="q1" class="question">
        <p><strong>1. Kdo aktuálně vede školu Vlka?</strong></p>
        <div class="choices">
          <button onclick="q1('Geralt')">Geralt</button>
          <button onclick="q1('Lambert')">Lambert</button>
          <button onclick="q1('Vesemir')">Vesemir</button>
        </div>
        <p id="f1" class="feedback"></p>
      </div>

      <!-- Q2 -->
      <div id="q2" class="question" style="display:none;">
        <p><strong>2. Jak se jmenuje hrad, kde sídlí škola Vlka?</strong></p>
        <div class="choices">
          <button onclick="q2('Novigrad')">Novigrad</button>
          <button onclick="q2('Kaer Morhen')">Kaer Morhen</button>
          <button onclick="q2('Oxenfurt')">Oxenfurt</button>
        </div>
        <p id="f2" class="feedback"></p>
      </div>

      <!-- Q3 -->
      <div id="q3" class="question" style="display:none;">
        <p><strong>3. Jaký lektvar zvyšuje noční vidění?</strong></p>
        <div class="choices">
          <button onclick="q3('Osel')">Osel</button>
          <button onclick="q3('Pavián')">Pavián</button>
          <button onclick="q3('Kočka')">Kočka</button>
        </div>
        <p id="f3" class="feedback"></p>
      </div>

      <!-- Q4 -->
      <div id="q4" class="question" style="display:none;">
        <p><strong>4. Čím prochází člověk, aby se stal zaklínačem?</strong></p>
        <div class="choices">
          <button onclick="q4('pravdy')">Zkouška pravdy</button>
          <button onclick="q4('trav')">Zkouška trav</button>
          <button onclick="q4('odhodlani')">Zkouška odhodlání</button>
        </div>
        <p id="f4" class="feedback"></p>
      </div>

      <!-- Q5 -->
      <div id="q5" class="question" style="display:none;">
        <p><strong>5. Co je to „Znak Quen“ a k čemu slouží?</strong></p>
        <div class="choices">
          <button onclick="q5('stit')">Ochranný štít</button>
          <button onclick="q5('ohnivy')">Ohnivý útok</button>
          <button onclick="q5('axii')">Manipulace mysli</button>
        </div>
        <p id="f5" class="feedback"></p>
      </div>

      <!-- Q6 -->
      <div id="q6" class="question" style="display:none;">
        <p><strong>6. Co loví zaklínač?</strong></p>
        <div class="choices">
          <button onclick="q6('poklady')">Poklady</button>
          <button onclick="q6('carodejky')">Čarodějky</button>
          <button onclick="q6('nestvury')">Nestvůry</button>
        </div>
        <p id="f6" class="feedback"></p>
      </div>

      <!-- Q7 (vše správné) -->
      <div id="q7" class="question" style="display:none;">
        <p><strong>7. Co by si nikdy neřekla v hospodě?</strong></p>
        <div class="choices">
          <button onclick="q7('mleko')">„Dám si mléko, prosím.“</button>
          <button onclick="q7('nezajmu')">„Nestvůry? Ty mě nezajímají.“</button>
          <button onclick="q7('elixirlasky')">„Znáte recept na elixír lásky?“</button>
        </div>
        <p id="f7" class="feedback"></p>
      </div>

      <!-- Q8 (vše správné) -->
      <div id="q8" class="question" style="display:none;">
        <p><strong>8. Tvůj nejoblíbenější nápoj po těžkém boji? </strong></p>
        <div class="choices">
          <button onclick="q8('medovina')">Víno</button>
          <button onclick="q8('vlastovka')">Vlaštovka (elixír)</button>
          <button onclick="q8('cokoliv')">Cokoliv, co mě neotráví</button>
        </div>
        <p id="f8" class="feedback"></p>
      </div>

      <!-- Q9 (vše správné) -->
      <div id="q9" class="question" style="display:none;">
        <p><strong>9. Zaklínačský způsob řešení hádky? </strong></p>
        <div class="choices">
          <button onclick="q9('mece')">Souboj na meče</button>
          <button onclick="q9('pravdy')">Elixír pravdy</button>
          <button onclick="q9('mlceni')">Mlčení a zamračený pohled</button>
        </div>
        <p id="f9" class="feedback"></p>
      </div>

      <div id="finish" style="display:none; margin-top:12px;">
        <div class="bubble">
          <p><strong>Alchymista:</strong> "Ano… vidím, že jsi pravá zaklínačka! – a ještě k tomu půvabná! Jakpak ti říkají, smím-li se ptát?"</p>
        </div>
        <div class="input-row">
          <input type="text" id="playerName" placeholder="Tvé jméno">
          <button onclick="submitName()">OK</button>
        </div>
        <div id="nameResp"></div>
      </div>

  <!-- Footer navigation removed -->
    </div>
  </div>

<script>
// Avatar efekt: změna obrázku na vyděšeného na 1 sekundu + přehrání zvuku
document.addEventListener('DOMContentLoaded', function() {
  var avatar = document.querySelector('.avatar');
  if(avatar) {
    var origSrc = avatar.getAttribute('src');
    var avatarAudio = document.getElementById('avatar-audio');
    if(!avatarAudio) {
      avatarAudio = document.createElement('audio');
      avatarAudio.id = 'avatar-audio';
      avatarAudio.src = 'audio/huh.ogg';
      avatarAudio.style.display = 'none';
      document.body.appendChild(avatarAudio);
    }
    avatar.addEventListener('click', function() {
      avatar.src = 'img/alchemista_vydeseny.png';
      try { avatarAudio.currentTime = 0; avatarAudio.play(); } catch(e) {}
      setTimeout(function() {
        avatar.src = origSrc;
      }, 1000);
    });
  }
});
let score=0;
function q1(a){
  const btns = document.querySelectorAll('#q1 .choices button');
  btns.forEach((b)=>{
    if(b.textContent === a) b.classList.add('selected');
    else b.classList.remove('selected');
  });
  const f=document.getElementById('f1');
  if(a==='Vesemir'){ score++; f.innerHTML='<span style="color:#1ca63a">✅ <em>„Ano… Vesemir. Starý, moudrý. Zajímalo by mě jak se má...“</em> (+1 důvěra)</span>'; show('q2'); }
  else if(a==='Geralt'){ f.innerHTML='❌ <em>„Geralt… vlk to je, ale nikdy nebyl mistrem. On kráčí vlastní cestou.“</em>'; }
  else { f.innerHTML='❌ <em>„Lambert… ha! Ten by sotva zvládl vést i stádo koz, natož zaklínačskou školu!“</em>'; }
}
function q2(a){
  const btns = document.querySelectorAll('#q2 .choices button');
  btns.forEach((b)=>{
    if(b.textContent === a) b.classList.add('selected');
    else b.classList.remove('selected');
  });
  const f=document.getElementById('f2');
  if(a==='Kaer Morhen'){ score++; f.innerHTML='<span style="color:#1ca63a">✅ <em>„Kaer Morhen… ano, stará pevnost v horách.“</em> (+1 důvěra)</span>'; show('q3'); }
  else if(a==='Novigrad'){ f.innerHTML='❌ <em>„Novigrad? Město kupců, né zaklínačů.“</em>'; }
  else { f.innerHTML='❌ <em>„Oxenfurt? Tam učí knihomolové, ne zaklínači.“</em>'; }
}
function q3(a){
  const btns = document.querySelectorAll('#q3 .choices button');
  btns.forEach((b)=>{
    if(b.textContent === a) b.classList.add('selected');
    else b.classList.remove('selected');
  });
  const f=document.getElementById('f3');
  if(a==='Kočka'){ score++; f.innerHTML='<span style="color:#1ca63a">✅ <em>„Ano… Kočka. Oči ve tmě jako v právem poledne.“</em> (+1 důvěra)</span>'; show('q4'); }
  else if(a==='Osel'){ f.innerHTML='❌ <em>„Osel? …Tvůj humor je temnější než noc sama.“</em>'; }
  else { f.innerHTML='❌ <em>„Pavián? Cože?! …tohle jsem snad ani já nikdy nemíchal.“</em>'; }
}

function highlightChoice(btns, value) {
  btns.forEach((b) => {
    if (b.getAttribute('onclick')?.includes(`'${value}'`)) b.classList.add('selected');
    else b.classList.remove('selected');
  });
}

function q4(a){
  const btns = document.querySelectorAll('#q4 .choices button');
  highlightChoice(btns, a);
  const f=document.getElementById('f4');
  if(a==='trav'){ score++; f.innerHTML='<span style="color:#1ca63a">✅ <em>„Ano! Zkouška trav. Bolest, krev a přežití – jen ti nejsilnější zůstali.“</em> (+1 důvěra)</span>'; show('q5'); }
  else if(a==='pravdy'){ f.innerHTML='❌ <em>„Pravdy? …Pravda v tomto světě nic neznamená.“</em>'; }
  else { f.innerHTML='❌ <em>„Vážně?“</em>'; }
}
function q5(a){
  const btns = document.querySelectorAll('#q5 .choices button');
  highlightChoice(btns, a);
  const f=document.getElementById('f5');
  if(a==='stit'){ score++; f.innerHTML='<span style="color:#1ca63a">✅ <em>„Správně! Quen chrání zaklínače před úderem, jako štít světla.“</em> (+1 důvěra)</span>'; show('q6'); }
  else if(a==='ohnivy'){ f.innerHTML='❌ <em>„To je Igni, ne Quen.“</em>'; }
  else { f.innerHTML='❌ <em>„To by byl Axii, ne Quen.“</em>'; }
}
function q6(a){
  const btns = document.querySelectorAll('#q6 .choices button');
  highlightChoice(btns, a);
  const f=document.getElementById('f6');
  if(a==='nestvury'){ score++; f.innerHTML='<span style="color:#1ca63a">✅ <em>„Ano. Nestvůry, ať vypadají jakkoliv…“</em> (+1 důvěra)</span>'; show('q7'); }
  else if(a==='poklady'){ f.innerHTML='❌ <em>„Poklady? To je práce zlodějů.“</em>'; }
  else { f.innerHTML='❌ <em>„Co vím, tak čarodějky spíš loví zaklínače. Hah!“</em>'; }
}
function q7(a){
  const btns = document.querySelectorAll('#q7 .choices button');
  highlightChoice(btns, a);
  const f=document.getElementById('f7');
  score++;
  if(a==='mleko'){ f.innerHTML='<span style="color:#1ca63a">✅ <em>„Haha!“</em> (+1 důvěra)</span>'; }
  if(a==='nezajmu'){ f.innerHTML='<span style="color:#1ca63a">✅ <em>„Haha!“</em> (+1 důvěra)</span>'; }
  if(a==='elixirlasky'){ f.innerHTML='<span style="color:#1ca63a">✅ <em>„Haha!“</em> (+1 důvěra)</span>'; }
  show('q8');
}
function q8(a){
  const btns = document.querySelectorAll('#q8 .choices button');
  highlightChoice(btns, a);
  const f=document.getElementById('f8');
  score++;
  if(a==='medovina'){ f.innerHTML='<span style="color:#1ca63a">✅ <em>„Čekal bych spíš medovinu, ale kdo jsem abych soudil !“</em> (+1 důvěra)</span>'; }
  if(a==='vlastovka'){ f.innerHTML='<span style="color:#1ca63a">✅ <em>„Ano, Vlaštovka. Uzdraví, posílí. Můj vynález!“</em> (+1 důvěra)</span>'; }
  if(a==='cokoliv'){ f.innerHTML='<span style="color:#1ca63a">✅ <em>„Ha! Pravda. Zaklínači mají žaludek z oceli, ale i ten má hranice.“</em> (+1 důvěra)</span>'; }
  show('q9');
}
function q9(a){
  const btns = document.querySelectorAll('#q9 .choices button');
  highlightChoice(btns, a);
  const f=document.getElementById('f9');
  score++;
  if(a==='mece'){ f.innerHTML='<span style="color:#1ca63a">✅ <em>„Krev často řeší víc než slova.“</em> (+1 důvěra)</span>'; }
  if(a==='pravdy'){ f.innerHTML='<span style="color:#1ca63a">✅ <em>„Zajímavé…“</em> (+1 důvěra)</span>'; }
  if(a==='mlceni'){ f.innerHTML='<span style="color:#1ca63a">✅ <em>„Haha. Jste všichni stejní.“</em> (+1 důvěra)</span>'; }
  show('finish');
}
function submitName(){
  const name = document.getElementById('playerName').value.trim() || 'Zaklínačko';
  localStorage.setItem('playerName', name);
  document.getElementById('nameResp').innerHTML = `<div class="bubble"><p><strong>Alchymista:</strong> "${name} ... krásné jméno! Rád tě poznávám, já jsem… já jsem…"</p><p><strong>Alchymista:</strong> "... na své jméno si nevzpomínám. Zvláštní, že? Ale to teď není důležité."</p></div>
    <div class='bubble' style='margin-top:10px;'><p><strong>Alchymista:</strong> "A jak se jmenuje tvůj společník na této cestě?"</p></div>
    <div class='input-row'><input type='text' id='companionName' placeholder='Jméno společníka'><button onclick='submitCompanion()'>OK</button></div>
    <div id='companionResp'></div>`;
}
function submitCompanion(){
  const name2 = document.getElementById('companionName').value.trim() || 'tvůj společník';
  localStorage.setItem('companionName', name2);
  document.getElementById('companionResp').innerHTML = `<div class='bubble'><p><strong>Alchymista:</strong> "${name2}, hmm, dobré jméno pro zaklínače!"</p></div><a class='continue-btn' href='kap4.html'>👉 Pokračovat</a>`;
}
</script>
</body>
</html>
