<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kapitola 3 â€“ BestiÃ¡Å™</title>
  <link rel="stylesheet" href="css/style.css">
  <script defer src="js/helpers.js"></script>
</head>
<body>
  <div class="container">
  <div class="nav"><a class="btn" href="kap4.html">â† ZpÄ›t</a></div>
    <h1>Kapitola 3 â€“ BestiÃ¡Å™</h1>
    <div class="panel">
      <div class="dialogue">
        <img src="img/alchemista_premysli.png" alt="Alchymista" class="avatar">
        <div class="bubble">
          <p><strong>Alchymista:</strong> "Hmmâ€¦ nÄ›co se mi vracÃ­. UÅ¾ jsem to vidÄ›l kdysi u sebe doma â€“ ta lebka, ta runa. Ten pÅ™edmÄ›t je prokletÃ½â€¦ MusÃ­me zjistit komu to patÅ™Ã­. <strong>Co zaklÃ­naÄskÃ½ bestiÃ¡Å™?</strong> Nebude tam, nÄ›co, co by nÃ¡m pomohlo najÃ­t zdroj!"</p>
        </div>
      </div>

      <div class="bubble" style="margin-top:8px;">
        <p><strong>Ãškol:</strong> Zadej nÃ¡zev monstra.</p>
        <div class="input-row">
          <input id="monster" type="text" placeholder="NapiÅ¡ jmÃ©no stvÅ¯ry">
          <button onclick="check()">Potvrdit</button>
        </div>
        <p id="hint" class="feedback"></p>
        <div id="cont"></div>
      </div>

  <!-- Footer navigation removed -->
    </div>
  </div>

<script>
// Avatar efekt: zmÄ›na obrÃ¡zku na vydÄ›Å¡enÃ©ho na 1 sekundu + pÅ™ehrÃ¡nÃ­ zvuku
document.addEventListener('DOMContentLoaded', function() {
  var avatar = document.querySelector('.avatar');
  if(avatar) {
    var origSrc = avatar.getAttribute('src');
    var avatarAudio = document.getElementById('avatar-audio');
    if(!avatarAudio) {
      avatarAudio = document.createElement('audio');
      avatarAudio.id = 'avatar-audio';
      avatarAudio.src = 'audio/huh.ogg';
      avatarAudio.style.display = 'none';
      document.body.appendChild(avatarAudio);
    }
    avatar.addEventListener('click', function() {
      avatar.src = 'img/alchemista_vydeseny.png';
      try { avatarAudio.currentTime = 0; avatarAudio.play(); } catch(e) {}
      setTimeout(function() {
        avatar.src = origSrc;
      }, 1000);
    });
  }
});
function check(){
  const raw = document.getElementById('monster').value;
  const norm = normalizeInput(raw);
  const hint = document.getElementById('hint');
  const cont = document.getElementById('cont');
  const ok = ['lesij','leshen','leshij']; // akceptujeme bÄ›Å¾nÃ© varianty po odstripovÃ¡nÃ­ diakritiky

  if(ok.includes(norm)){
    hint.textContent='';
    cont.innerHTML = `<div class="bubble" style="margin-top:8px;"><p><strong>Alchymista:</strong> "LeÅ¡ijâ€¦ prastarÃ½.. ochrÃ¡nce lesÅ¯... ale tento je jinÃ½, je v nÄ›m ÄistÃ© zlo! VidÄ›l jsem hoâ€¦ ve snech se pÅ™ibliÅ¾oval. MusÃ­ bÃ½t zastaven! ÃÅˆo, tvÃ© Äepele a Å¡Ã­py jsou teÄ naÅ¡Ã­ jedinou nadÄ›jÃ­. JÃ¡ ti pomÅ¯Å¾u, jak budu moci â€“ poradÃ­m s lektvary, se vÅ¡Ã­m potÅ™ebnÃ½m â€“ ale ten boj je nakonec na tobÄ›."</p></div>
    <a class="continue-btn" href="kap7.html">ğŸ‘‰ PokraÄovat</a>`;
  }else{
    // specifickÃ© nÃ¡povÄ›dy
    const m = norm;
    if(m.includes('upir')){
      hint.textContent = 'â€UpÃ­râ€¦ ne. Tohle nebylo z krve, ale ze dÅ™eva. V Å¾ilÃ¡ch mu neproudila ÄervenÃ¡, ale mÃ­za.â€œ';
    }else if(m.includes('vlci') || m.includes('demon') || m.includes('vlk')){
      hint.textContent = 'â€MyslÃ­Å¡, Å¾e to byl vlk? Vypadal, Å¾e vlky ovlÃ¡dÃ¡ â€“ dÄ›lÃ¡ si z nich oÄi. Ale sÃ¡m vlkem nebyl.â€œ';
    }else if(m.includes('ent')){
      hint.textContent = 'â€Stromâ€¦ ano, vypadalo to jako strom. Ale nebyl laskavÃ½ strÃ¡Å¾ce. Tenhle les vraÅ¾dil. Les byl prokletÃ½.â€œ';
    }else{
      hint.textContent = 'â€Neâ€¦ Hledej bytost spjatou s lesem, s koÅ™eny, co chodÃ­ a porouÄÃ­ zvÃ­Å™atÅ¯mâ€¦â€œ';
    }
    cont.innerHTML='';
  }
}
</script>
</body>
</html>
