<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kapitola 3 – Bestiář</title>
  <link rel="stylesheet" href="css/style.css">
  <script defer src="js/helpers.js"></script>
</head>
<body>
  <div class="container">
  <div class="nav"><a class="btn" href="kap4.html">← Zpět</a></div>
    <h1>Kapitola 3 – Bestiář</h1>
    <div class="panel">
      <div class="dialogue">
        <img src="img/alchemista_premysli.png" alt="Alchymista" class="avatar">
        <div class="bubble">
          <p><strong>Alchymista:</strong> "Hmm… něco se mi vrací. Už jsem to viděl kdysi u sebe doma – ta lebka, ta runa. Ten předmět je prokletý… Musíme zjistit komu to patří. <strong>Co zaklínačský bestiář?</strong> Nebude tam, něco, co by nám pomohlo najít zdroj!"</p>
        </div>
      </div>

      <div class="bubble" style="margin-top:8px;">
        <p><strong>Úkol:</strong> Zadej název monstra.</p>
        <div class="input-row">
          <input id="monster" type="text" placeholder="Napiš jméno stvůry">
          <button onclick="check()">Potvrdit</button>
        </div>
        <p id="hint" class="feedback"></p>
        <div id="cont"></div>
      </div>

  <!-- Footer navigation removed -->
    </div>
  </div>

<script>
// Avatar efekt: změna obrázku na vyděšeného na 1 sekundu + přehrání zvuku
document.addEventListener('DOMContentLoaded', function() {
  var avatar = document.querySelector('.avatar');
  if(avatar) {
    var origSrc = avatar.getAttribute('src');
    var avatarAudio = document.getElementById('avatar-audio');
    if(!avatarAudio) {
      avatarAudio = document.createElement('audio');
      avatarAudio.id = 'avatar-audio';
      avatarAudio.src = 'audio/huh.ogg';
      avatarAudio.style.display = 'none';
      document.body.appendChild(avatarAudio);
    }
    avatar.addEventListener('click', function() {
      avatar.src = 'img/alchemista_vydeseny.png';
      try { avatarAudio.currentTime = 0; avatarAudio.play(); } catch(e) {}
      setTimeout(function() {
        avatar.src = origSrc;
      }, 1000);
    });
  }
});
function check(){
  const raw = document.getElementById('monster').value;
  const norm = normalizeInput(raw);
  const hint = document.getElementById('hint');
  const cont = document.getElementById('cont');
  const ok = ['lesij','leshen','leshij']; // akceptujeme běžné varianty po odstripování diakritiky

  if(ok.includes(norm)){
    hint.textContent='';
    cont.innerHTML = `<div class="bubble" style="margin-top:8px;"><p><strong>Alchymista:</strong> "Lešij… prastarý.. ochránce lesů... ale tento je jiný, je v něm čisté zlo! Viděl jsem ho… ve snech se přibližoval. Musí být zastaven! Áňo, tvé čepele a šípy jsou teď naší jedinou nadějí. Já ti pomůžu, jak budu moci – poradím s lektvary, se vším potřebným – ale ten boj je nakonec na tobě."</p></div>
    <a class="continue-btn" href="kap7.html">👉 Pokračovat</a>`;
  }else{
    // specifické nápovědy
    const m = norm;
    if(m.includes('upir')){
      hint.textContent = '„Upír… ne. Tohle nebylo z krve, ale ze dřeva. V žilách mu neproudila červená, ale míza.“';
    }else if(m.includes('vlci') || m.includes('demon') || m.includes('vlk')){
      hint.textContent = '„Myslíš, že to byl vlk? Vypadal, že vlky ovládá – dělá si z nich oči. Ale sám vlkem nebyl.“';
    }else if(m.includes('ent')){
      hint.textContent = '„Strom… ano, vypadalo to jako strom. Ale nebyl laskavý strážce. Tenhle les vraždil. Les byl prokletý.“';
    }else{
      hint.textContent = '„Ne… Hledej bytost spjatou s lesem, s kořeny, co chodí a poroučí zvířatům…“';
    }
    cont.innerHTML='';
  }
}
</script>
</body>
</html>
